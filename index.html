<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Market Monitor</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* í—¤ë” */
        .header-title { text-align: center; margin-bottom: 30px; color: #2c3e50; }

        /* ìƒë‹¨ ì§€í‘œ ì¹´ë“œ */
        header { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .card { background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center; border: 1px solid #eee; }
        .card h2 { margin: 0 0 5px 0; font-size: 14px; color: #888; font-weight: 600; text-transform: uppercase; }
        .card p { margin: 5px 0; font-size: 26px; font-weight: 800; color: #2c3e50; }
        .chart-img { width: 100%; height: 50px; object-fit: contain; margin-top: 10px; opacity: 0.9; }
        
        /* ë©”ì¸ ì»¨í…ì¸  ê·¸ë¦¬ë“œ (ë¯¸êµ­ë§µ vs í•œêµ­ë°ì´í„°) */
        .main-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        @media (max-width: 768px) { .main-grid { grid-template-columns: 1fr; } }

        .section-box { background: #fff; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee; height: 600px; }
        .box-title { background: #f8f9fa; padding: 15px; font-weight: bold; border-bottom: 1px solid #eee; text-align: center; font-size: 1.1em; }

        /* ë‰´ìŠ¤ ì„¹ì…˜ */
        .news-section { background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee; }
        .news-section h3 { margin-top: 0; border-bottom: 2px solid #f1f3f5; padding-bottom: 15px; color: #343a40; }
        .news-group { margin-bottom: 25px; }
        .news-group h4 { display: inline-block; background: #e7f5ff; color: #1971c2; padding: 5px 12px; border-radius: 20px; font-size: 0.95em; margin: 10px 0; }
        .news-list { list-style: none; padding: 0; }
        .news-item { margin-bottom: 10px; padding-left: 10px; border-left: 3px solid #dee2e6; }
        .news-item a { text-decoration: none; color: #495057; font-weight: 500; transition: color 0.2s; }
        .news-item a:hover { color: #1971c2; }
        .news-date { font-size: 0.8em; color: #adb5bd; margin-left: 8px; }

        footer { text-align: center; margin-top: 40px; color: #adb5bd; font-size: 13px; padding-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-title">
            <h1>Daily Market Monitor</h1>
        </div>

        <header>
            <div class="card">
                <h2>KOSPI</h2>
                <p>{{KOSPI_VAL}}</p>
                <img class="chart-img" src="{{KOSPI_CHART}}" alt="Chart">
            </div>
            <div class="card">
                <h2>S&P 500</h2>
                <p>{{SP500_VAL}}</p>
                <img class="chart-img" src="{{SP500_CHART}}" alt="Chart">
            </div>
            <div class="card">
                <h2>USD/KRW</h2>
                <p>{{USDKRW_VAL}}</p>
                <img class="chart-img" src="{{USDKRW_CHART}}" alt="Chart">
            </div>
        </header>

        <div class="main-grid">
            <div class="section-box">
                <div class="box-title">ğŸ‡ºğŸ‡¸ ë¯¸êµ­ ì¦ì‹œ íˆíŠ¸ë§µ (S&P 500)</div>
                <div class="tradingview-widget-container" style="height:100%;width:100%">
                    <div class="tradingview-widget-container__widget" style="height:calc(100% - 40px);width:100%"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js" async>
                    {
                        "exchanges": [],
                        "dataSource": "SPX500",
                        "grouping": "sector",
                        "blockSize": "market_cap_basic",
                        "blockColor": "change",
                        "locale": "kr",
                        "symbolUrl": "",
                        "colorTheme": "light",
                        "hasTopBar": false,
                        "isDataSetEnabled": false,
                        "isZoomEnabled": true,
                        "hasSymbolTooltip": true,
                        "width": "100%",
                        "height": "100%"
                    }
                    </script>
                </div>
            </div>

            <div class="section-box">
                <div class="box-title">ğŸ‡°ğŸ‡· í•œêµ­ ì¦ì‹œ í˜„í™© (KOSPI)</div>
                <div class="tradingview-widget-container" style="height:100%;width:100%">
                    <div class="tradingview-widget-container__widget" style="height:calc(100% - 40px);width:100%"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                    {
                    "colorTheme": "light",
                    "dateRange": "12M",
                    "showChart": true,
                    "locale": "kr",
                    "largeChartUrl": "",
                    "isTransparent": false,
                    "showSymbolLogo": true,
                    "showFloatingTooltip": false,
                    "width": "100%",
                    "height": "100%",
                    "tabs": [
                        {
                        "title": "ì§€ìˆ˜ & ì£¼ìš” ì¢…ëª©",
                        "symbols": [
                            { "s": "KRX:KOSPI", "d": "ì½”ìŠ¤í”¼" },
                            { "s": "KRX:KOSDAQ", "d": "ì½”ìŠ¤ë‹¥" },
                            { "s": "KRX:005930", "d": "ì‚¼ì„±ì „ì" },
                            { "s": "KRX:000660", "d": "SKí•˜ì´ë‹‰ìŠ¤" },
                            { "s": "KRX:373220", "d": "LGì—ë„ˆì§€ì†”ë£¨ì…˜" },
                            { "s": "KRX:005380", "d": "í˜„ëŒ€ì°¨" }
                        ]
                        }
                    ]
                    }
                    </script>
                </div>
                </div>
        </div>

        <div class="news-section">
            <h3>ğŸ“ˆ ì•„ì¹¨ ë¸Œë¦¬í•‘ & ğŸ¤– ë¡œë´‡ ë‰´ìŠ¤</h3>
            {{NEWS_CONTENT}}
        </div>

        <footer>
            Last Updated: {{LAST_UPDATED}}
        </footer>
    </div>
</body>
</html>
